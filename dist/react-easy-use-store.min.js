!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ReactEasyUseStore={},e.React)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(t);const o=new class{constructor(){this.subs=[]}addSub(e){this.subs.push(e)}notifySubs(e){this.subs.forEach((t=>t(e)))}};function u(e={}){let t=e;return{setStore:(e,n)=>{t[e]=n,o.notifySubs(t),o.onStateChange&&o.onStateChange(t)},getState:()=>t,subscription:o}}const f=r.default.createContext(null),i=t.createContext({});function s({store:e,children:n}){const o=t.useRef(!0),[u,s]=t.useState({}),{subscription:c}=e;return t.useLayoutEffect((()=>{if(o.current)return c.onStateChange=s,void(o.current=!1)}),[]),r.default.createElement(f.Provider,{value:e},r.default.createElement(i.Provider,{value:u},n))}function c(){return c=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function a(...e){return n=>o=>{const u=t.useContext(i),f={};e.forEach((e=>{f[e]=u[e]}));let s=t.memo(n,(function(e,t){return!!function(e,t){let n,r,o,u;function f(e,t){let n;if(isNaN(e)&&isNaN(t)&&"number"==typeof e&&"number"==typeof t)return!0;if(e===t)return!0;if("function"==typeof e&&"function"==typeof t||e instanceof Date&&t instanceof Date||e instanceof RegExp&&t instanceof RegExp||e instanceof String&&t instanceof String||e instanceof Number&&t instanceof Number)return""+e==""+t;if(!(e instanceof Object&&t instanceof Object))return!1;if(e.isPrototypeOf(t)||t.isPrototypeOf(e))return!1;if(e.constructor!==t.constructor)return!1;if(e.prototype!==t.prototype)return!1;if(o.indexOf(e)>-1||u.indexOf(t)>-1)return!1;for(n in t){if(t.hasOwnProperty(n)!==e.hasOwnProperty(n))return!1;if(typeof t[n]!=typeof e[n])return!1}for(n in e){if(t.hasOwnProperty(n)!==e.hasOwnProperty(n))return!1;if(typeof t[n]!=typeof e[n])return!1;switch(typeof e[n]){case"object":case"function":if(o.push(e),u.push(t),!f(e[n],t[n]))return!1;o.pop(),u.pop();break;default:if(e[n]!==t[n])return!1}}return!0}if(1>arguments.length)return!0;for(n=1,r=arguments.length;r>n;n++)if(o=[],u=[],!f(arguments[0],arguments[n]))return!1;return!0}(t,e)}));return r.default.createElement(s,c({},o,f))}}function p(){return t.useContext(f).setStore}const l=(...e)=>{const[n,r]=t.useState([]);return t.useEffect((()=>{o.addSub(r)}),[]),e.map((e=>n[e]))};var d={createStore:u,connect:a,Provider:s,useSetStorer:p,useSelector:l};e.Provider=s,e.connect=a,e.createStore=u,e.default=d,e.useSelector=l,e.useSetStorer=p,Object.defineProperty(e,"__esModule",{value:!0})}));
